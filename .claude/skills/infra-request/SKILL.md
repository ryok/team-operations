---
name: infra-request
description: |
  松尾研究室のインフラ申請フォームを自動作成するスキル。申請種別に応じた必要情報を収集し、Google Formへの問い合わせ本文を自動生成して送信する。
  Use when: (1) インフラ申請をしたい、(2) アカウント追加を依頼したい、(3) GitHub/Slack/AWS/GCPなどの環境申請、(4) メンバー追加の申請、(5) 研究室の情シスに問い合わせたい
  Trigger: インフラ申請, infra, アカウント申請, メンバー追加, 環境申請, 情シス, infrastructure request
---

# 松尾研究室 インフラ申請自動化

研究室の情報システムチーム（情シス・HPC）への問い合わせを自動化する。
申請種別の選択 → 必要情報の収集 → 問い合わせ本文の生成 → Google Formへの送信を行う。

## 重要ルール

1. **申請は必ずPMが行う**（メンバーの直接申請は禁止）
2. **直接DMはせず、必ずGoogle Form経由で依頼する**
3. 細かい内容はフォーム提出後にSlackで相談可能。まずはやりたいことを記載して提出する
4. PJT・メンバーの稼働終了時は即時にアクセス権削除の申請を行う
5. 外部にサービスを公開する場合は必ず情シス・情シス連携担当者に相談する

## 依頼先の判定

依頼先は契約形態・プラットフォームの所属によって異なる:
- **MKJ申請**: MKJ契約のプロジェクト → [【松尾研究所】アクセス権申請](https://docs.google.com/forms/d/e/1FAIpQLSdEwHT5EV6dxqf0lxnh1ZmFyCzTOpAYb0yTeJxX1nsgaku9gA/viewform)
- **研究室申請**: 東大契約/研究室環境 → [【松尾研究室】情シス・HPC お問合せフォーム](https://docs.google.com/forms/d/e/1FAIpQLSfJfR8VmWys3iQLIA5ijqpU7boUFnBs19QDhFHPwVLmAP7hXw/viewform)

ユーザーにどちらの環境かを必ず確認すること。判断がつかない場合はNotionの[申請内容一覧](https://www.notion.so/ae4de2c6eb9b4047b351d529af3c0d84)を参照するよう案内する。

## 申請種別と必要情報

### 1. GoogleWorkspace

#### (a) 社内利用プロジェクトドライブ作成
- **必要情報**: 顧客名
- **命名規則**: *顧客名の頭文字*社（例: W社）

#### (b) ドライブに紐付けるグループ作成・メンバー追加
- **必要情報**: 追加メンバーのフルネーム、メールアドレス（自社アドレスがある場合はそちら）
- **備考**: (2025/11〜) 作成済みグループへの事後メンバー追加は申請不要。PMが直接実施可能

#### (c) 社外共有用ドライブ作成
- **必要情報**: 顧客名
- **命名規則**: ●●会社様-松尾研究所データ連携

#### (d) 社外共有用ドライブのグループ作成・メンバー追加
- **必要情報**: 追加メンバーのフルネーム、メールアドレス
- **備考**: 情報漏洩リスク抑制のため、社内ドライブメンバーから厳選する

#### (e) メールアドレス（Google Workspaceアカウント）作成
- **必要情報**: 発行される方の漢字氏名とアルファベット（例: 野海芳博 NOUMI Yoshihiro）
- **備考**: MKJ社員の場合はallstuff@グループへの追加も連絡が必要

### 2. GitHub

#### (a) アカウント追加
- **必要情報**: 追加する人のGitHubアカウントID

#### (b) チーム作成
- **必要情報**: 顧客名
- **命名規則**: team_*顧客名の頭文字*（例: team_w）

#### (c) チームへのメンバー追加
- **必要情報**: 追加メンバーのフルネーム、GitHubアカウント
- **備考**: (2025/11〜) 作成済みチームへの事後メンバー追加は申請不要。PMがGoogleWorkspaceグループにメンバー追加すると自動連携

#### (d) 研究室Wikiページへの追加
- **必要情報**: 追加メンバーのフルネーム、GitHubアカウント

### 3. Slack

#### (a) メンバー追加
- **必要情報**: メンバーの権限指定
- **権限ルール**:
  - 松尾研メンバ（配属・共同研究PJTメンバ・職員） → 通常メンバー
- **備考**: 東大契約の場合は自動登録（申請不要）

#### (b) ゲスト追加（シングル/マルチチャンネルゲスト）
- **必要情報**: 追加する人の名前、メールアドレス
- **対象**: TA・外部の方（業務委託企業）などコミットが限定的な方

#### (c) Slackコネクト
- **必要情報**: 追加する人の名前、メールアドレス
- **条件**: 顧客がSlack有料ワークスペースを持っている場合に利用可能

### 4. Notion
- **対応内容**: メンバー＆グループ追加
- **必要情報**: 追加メンバーのフルネーム、メールアドレス、追加先のグループ名
- **備考**: (2025/11〜) 作成済みチームへの事後メンバー追加は申請不要。PMがGoogleWorkspaceグループにメンバー追加すると自動連携

### 5. ABCI
- **対応内容**: アカウント申請
- **必要情報**:
  - （アルファベット表記）Last name, First name
  - （漢字表記）姓, 名
  - 特定類型該当者か？（該当なら類型1〜3のどれか）
  - 所属組織のメールアドレス
  - 所属組織発行の顔写真付き身分証明書
  - 日本滞在期間が6ヶ月以上かどうか
  - 国外所属機関があればその名前（全て）
  - 既存ABCIアカウント（あれば）
  - 他のABCIグループも利用したい場合そのグループID
- **デフォルトグループ**:
  - 研究室: gcb50389（Deep Learning Research）
  - 研究所: gcd50654（深層学習を利用した他社との共同研究）

### 6. AWS
#### (a) PJT単位のアカウント作成
- **必要情報**: 利用目的、利用したいサービス（まずは相談）

#### (b) ロールの作成
- **必要情報**: ロールの用途、権限範囲

#### (c) IAMユーザー作成＆ロール設定
- **命名規則**: 名前.名字（例: yutaka.matsuo）

### 7. Teams
- **対応内容**: アカウント申請
- **備考**: 詳細は別ページ参照

### 8. OpenAI API
- **対応内容**: API利用申請
- **備考**: 詳細は別ページ参照

### 9. ガレージのキー
- **対応内容**: アカウント作成
- **必要情報**: 追加したい方のお名前、メールアドレス（MKJアドレスまたはweblabアドレス優先）

## メンバー情報の参照先

申請にインターンの情報が必要な場合、以下の名簿を参照する:
- [採用時入力フォーム(MKJ)](https://docs.google.com/spreadsheets/d/1BZGeysX4GMXcxkrIwOx83VlZ0a_rYFEsZvydlse4s-Y/edit?gid=202948821#gid=202948821)
- [採用時入力フォーム(UT)](https://docs.google.com/spreadsheets/d/1zb4zsU06kEYljZAhgXpM6cyxrAdFwGgtl04LFnfhLPU/edit?resourcekey=&gid=1264806583#gid=1264806583)
- [共同研究インターン名簿](https://docs.google.com/spreadsheets/d/1A4CM1e5TgAZfNrj23uVKZapvtysvWIjovXanfQOzSkk/)

## Google Form情報

### 研究室申請フォーム

- **URL**: `https://docs.google.com/forms/d/e/1FAIpQLSfJfR8VmWys3iQLIA5ijqpU7boUFnBs19QDhFHPwVLmAP7hXw/viewform`
- **フィールド**:
  | フィールド名 | entry ID | 入力タイプ | 備考 |
  |---|---|---|---|
  | お名前 | entry.1493488087 | テキスト | 必須 |
  | お問合せ | entry.1354030907 | 長文テキスト | 必須。申請内容をここに記載 |
  | 非公開希望 | entry.423235856 | 選択肢 | 「公開OK」「その他（理由記入）」 |
  | 活動母体が東京大学か | entry.505120126 | 選択肢 | 「東京大学である」「その他」 |
  | 対応優先度 | entry.493147735 | 選択肢 | 「通常対応」「優先対応」 |
  | 対応期日 | entry.2016367837 | 日付 | 任意 |

### Pre-filled URL生成

```
https://docs.google.com/forms/d/e/1FAIpQLSfJfR8VmWys3iQLIA5ijqpU7boUFnBs19QDhFHPwVLmAP7hXw/viewform?usp=pp_url&entry.1493488087={名前}&entry.1354030907={問い合わせ内容}&entry.505120126={活動母体}&entry.493147735={対応優先度}
```

URLパラメータ値はURLエンコードすること。

### MKJ申請フォーム
- **URL**: `https://docs.google.com/forms/d/e/1FAIpQLSdEwHT5EV6dxqf0lxnh1ZmFyCzTOpAYb0yTeJxX1nsgaku9gA/viewform`

## 実行フロー

### Step 1: 申請種別の確認
AskUserQuestion を使用して以下を確認:
1. **依頼先**: 研究室（東大契約） or MKJ（MKJ契約）
2. **申請種別**: 上記の申請種別一覧から選択
3. **対応内容**: 具体的なアクション（アカウント追加、チーム作成など）

### Step 2: 必要情報の収集
申請種別に応じた必要情報を AskUserQuestion で収集する。
メンバー情報が必要な場合、名簿スプレッドシートを google-drive スキルで参照可能か確認する。

### Step 3: 問い合わせ本文の生成
以下のフォーマットで問い合わせ本文を生成する:

```
【申請種別】{ツール名} - {対応内容}
【プロジェクト名】{プロジェクト名}
【申請者】{申請者名}（PM）

■ 依頼内容
{具体的な依頼内容}

■ 対象メンバー情報
{名前、メールアドレス、アカウントIDなどの必要情報}

■ 備考
{追加情報があれば}
```

### Step 4: Pre-filled URLの生成とフォーム送信
1. 収集した情報からPre-filled URLを生成する
2. `open` コマンド（macOS）でブラウザを開く
3. または agent-browser スキルを使ってフォームを自動入力・送信する

**`open` コマンドでの起動例**:
```bash
open "https://docs.google.com/forms/d/e/1FAIpQLSfJfR8VmWys3iQLIA5ijqpU7boUFnBs19QDhFHPwVLmAP7hXw/viewform?usp=pp_url&entry.1493488087=%E5%B1%B1%E7%94%B0%E5%A4%AA%E9%83%8E&entry.1354030907=%E7%94%B3%E8%AB%8B%E5%86%85%E5%AE%B9&entry.505120126=%E6%9D%B1%E4%BA%AC%E5%A4%A7%E5%AD%A6%E3%81%A7%E3%81%82%E3%82%8B&entry.493147735=%E9%80%9A%E5%B8%B8%E5%AF%BE%E5%BF%9C"
```

### Step 5: 確認
- フォームが開いたことを確認
- 内容を最終確認してから送信するようユーザーに案内する
- 「細かい内容はフォーム提出後にSlackで相談可能」と伝える

## 注意事項

- ユーザーが「申請不要」なケースに該当する場合はその旨を伝える:
  - 作成済みGoogleWorkspaceグループへの事後メンバー追加（PMが直接可能）
  - 作成済みGitHubチームへの事後メンバー追加（GoogleWorkspaceグループ連携で自動）
  - 作成済みNotionチームへの事後メンバー追加（GoogleWorkspaceグループ連携で自動）
  - 東大契約のSlackメンバー追加（自動登録）
- MKJアドレスは所属組織に応じて自動付与（2025年1月〜順次対応）
